<html>
<head>

<script src="functions/op2ind.js"></script>
<script src="functions/validation/test_cases.js"></script>
<script src="functions/preprocess_input.js"></script>
<script src="functions/operators_database.js"></script>
<script src="functions/parse_formula.js"></script>
<script src="functions/postprocess_tree.js"></script>
<script src="functions/get_tree_size.js"></script>
<script src="functions/sort_tree.js"></script>
<script src="functions/replace_var_names.js"></script>
<script src="functions/plot_AST.js"></script>
<script src="index.js"></script>
<!-- <script src="functions/parameters.js"></script> -->

<script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script> <!-- MathJax library -->

<link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300&display=swap" rel="stylesheet">

<link rel="stylesheet" href="https://fperucic.github.io/treant-js/Treant.css" type="text/css"/>
<link rel="stylesheet" href="functions/ast.css">

<script src="https://fperucic.github.io/treant-js/Treant.js"></script>
<script src="https://fperucic.github.io/treant-js/vendor/raphael.js"></script>
</head>
<body>

<div id="wrapper_1">
	<input type="text" id="input_latex_1">
	<input type="number" id="input_test_index_1" value=0 min="0" max="60">
	<select name="parsing_mode_1" id="parsing_mode_1">
		<option value="0">Basic</option>
		<option value="1">Sorted</option>
		<option value="2">Canonical</option>
		<option value="3">Similarity</option>
		<option value="4">Matching</option>
	</select>
	<div id="compiled_latex_1"></div>
	<div id="LaTex_AST_1"></div>
</div>

<div id="wrapper_2">
	<input type="text" id="input_latex_2">
	<input type="number" id="input_test_index_2" value=0 min="0" max="60">
	<select name="parsing_mode_2" id="parsing_mode_2">
		<option value="0">Basic</option>
		<option value="1">Sorted</option>
		<option value="2">Canonical</option>
		<option value="3">Similarity</option>
		<option value="4">Matching</option>
	</select>
	<div id="compiled_latex_2"></div>
	
	<div id="LaTex_AST_2"></div>
</div>

<script>
	let t = [0];
	
	for(let i=1; i<=2; i++) {
		
		index(t,0,"#LaTex_AST_" + i);
		document.getElementById("input_latex_" + i).value = test_cases(t);
		
		document.getElementById("compiled_latex_" + i).innerHTML = '$$' + document.getElementById("input_latex_" + i).value + '$$'; // Update the text in the compiled LaTex box.
		// MathJax.typeset([document.getElementById("compiled_latex_1")]); // Compile LaTex.
		
		document.getElementById("input_test_index_" + i).addEventListener("change", function() {
			document.getElementById("LaTex_AST_" + i).innerHTML = "";
			
			if(this.value.length) {
				document.getElementById("input_latex_" + i).value = test_cases(this.value);
				
				document.getElementById("compiled_latex_" + i).innerHTML = '$$' + document.getElementById("input_latex_" + i).value + '$$'; // Update the text in the compiled LaTex box.
				MathJax.typeset([document.getElementById("compiled_latex_" + i)]); // Compile LaTex.
				
				index([Number(this.value)],document.getElementById("parsing_mode_" + i).value,"#LaTex_AST_" + i);
			} else {
				document.getElementById("input_latex_" + i).value = "";
			}
		});
		
		document.getElementById("input_latex_" + i).addEventListener("keyup", function() {
			
			document.getElementById("compiled_latex_" + i).innerHTML = '$$' + document.getElementById("input_latex_" + i).value + '$$'; // Update the text in the compiled LaTex box.
			MathJax.typeset([document.getElementById("compiled_latex_" + i)]); // Compile LaTex.
			
			document.getElementById("LaTex_AST_" + i).innerHTML = "";
			index(this.value,document.getElementById("parsing_mode_" + i).value,"#LaTex_AST_" + i);
		});
		
		document.getElementById("parsing_mode_" + i).addEventListener("change", function() {
			document.getElementById("LaTex_AST_" + i).innerHTML = "";
			index(document.getElementById("input_latex_" + i).value ,this.value,"#LaTex_AST_" + i);
		});
	}
	
</script>

</body>
</html>